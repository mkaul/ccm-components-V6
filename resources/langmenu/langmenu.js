ccm.component({name:"langmenu",config:{context:!0,style:[ccm.load,"http://mkaul.github.io/ccm-components/resources/langmenu/langmenu.css"],lang:[ccm.instance,"http://mkaul.github.io/ccm-components/resources/lang/lang.js",{langmenu:null,store:[ccm.store,"http://mkaul.github.io/ccm-components/resources/langmenu/lang_langmenu.json"]}],languages:["de","en"]},Instance:function(){function e(e){for(var t=0;t<n.length;t++)n[t](e)}var n=[],t=this;this.init=function(e){if(t.context){var n=ccm.context.find(t,"langmenu");t.context=n&&n.context||n}e&&e()},this.render=function(n){if(t.context)return t.context.render(n);for(var a=ccm.helper.element(t).html(""),l=0;l<t.languages.length;l++){var c=ccm.helper.val(t.languages[l],"key");a.append('<div class="langmenu_flag langmenu_flag-'+c+'" data-langmenu="'+c+'" title="lang#'+c+'"></div>')}var s=a.find(".langmenu_flag");s.click(function(){a.find(".langmenu_selected").removeClass("langmenu_selected"),jQuery(this).addClass("langmenu_selected");var n=t.parent?t.parent.element:jQuery("html"),l=jQuery(this).attr("data-langmenu");n.attr("lang",l),t.lang.render(),e(l)}),s.each(function(){jQuery(this).attr("data-langmenu")===(t.selected?t.selected:t.languages[0])&&jQuery(this).addClass("langmenu_selected")}),a.find(".langmenu_selected").click(),n&&n()},this.addObserver=function(e){return t.context?t.context.addObserver(e):void n.push(e)}}});